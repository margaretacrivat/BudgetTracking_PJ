{% extends 'base/base.html' %}
{% load static %}

{% block title %} Edit Project {% endblock %}

{% block content %}

    <div class="container-main">

        {% include 'base/sidebar_pj.html' %}

        <!-- ***** Breadcrumb Start ***** -->
        <div class="container-breadcrumb-bar">
            <nav aria-label="breadcrumb-nav">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a
                            href="{% url 'projects' %}">Projects</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">
                        Edit Project
                    </li>
                </ol>
            </nav>
        </div>
        <!-- ***** Breadcrumb End ***** -->

        <div class="edit-project-form">
            <div class="edit-form-body" id="editProjectForm">
                <h4>Edit Project Form</h4>
                <form action="{% url 'edit-project' project.id %}" method="post">
                    {% include 'authentication/_messages.html' %} {% csrf_token %}

                    <div class="form-group">
                        <!-- Render each field individually -->
                        {% for field in form %}
                            {% if field.name == 'institution' %}
                                <div class="inline-fields institution">
                                    <label for="institution">Institution</label>
                                    <div class="input-group">
                                        <input type="text" name="institution" id="institution"
                                               class="form-control institution-input"
                                               value="{% if field.value %}{{ field.value }}{% endif %}">
                                    </div>
                                </div>
                            {% elif field.name == 'project' %}
                                <div class="inline-fields project">
                                    <label for="project">Project</label>
                                    <div class="input-group">
                                        <input type="text" name="project" id="project"
                                               class="form-control project-input"
                                               value="{% if field.value %}{{ field.value }}{% endif %}"">
                                    </div>
                                </div>
                            {% elif field.name == 'project_title' %}
                                <div class="inline-fields project-title">
                                    <label for="projectTitle">Project Title</label>
                                    <div class="input-group">
                                        <input type="text" name="project_title" id="projectTitle"
                                               class="form-control project-title-input"
                                               value="{% if field.value %}{{ field.value }}{% endif %}">
                                    </div>
                                </div>
                            {% elif field.name == 'project_stages' %}
                                <div class="inline-fields project-stages">
                                    <label for="projectStages">Project Stages</label>
                                    <div class="input-group">
                                        <input type="number" name="project_stages" id="projectStages"
                                               class="form-control project-stages-input"
                                               value="{{ field.value }}">
                                    </div>
                                </div>
                            {% elif field.name == 'project_manager' %}
                                <div class="inline-fields project-manager">
                                    <label for="projectManager">Project Manager</label>
                                    <div class="input-group">
                                        <input type="text" name="project_manager" id="projectManager"
                                               class="form-control project-manager-input"
                                               value="{% if field.value %}{{ field.value }}{% endif %}">
                                    </div>
                                </div>
                            {% elif field.name == 'funder' %}
                                <div class="inline-fields project-funder">
                                    <label for="funder">Funder</label>
                                    <div class="input-group">
                                        <input type="text" name="funder" id="funder"
                                               class="form-control funder-input"
                                               value="{% if field.value %}{{ field.value }}{% endif %}">
                                    </div>
                                </div>
                            {% elif field.name == 'contract' %}
                                <div class="inline-fields project-contract">
                                    <label for="contract">Contract</label>
                                    <div class="input-group">
                                        <input type="text" name="contract" id="contract"
                                               class="form-control contract-input"
                                               value="{% if field.value %}{{ field.value }}{% endif %}">
                                    </div>
                                </div>
                            {% elif field.name == 'project_type' %}
                                <div class="inline-fields project-type">
                                    <label for="projectType">Project Type</label>
                                    <div class="input-group">
                                        <select name="project_type" id="projectType"
                                                class="form-control project-type-select">
                                            {% for type in project_type %}
                                                {% if type == project.project_type %}
                                                    <option value="{{ type }}" selected>{{ type }}</option>
                                                {% else %}
                                                    <option value="{{ type }}">{{ type }}</option>
                                                {% endif %}
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                            {% elif field.name == 'budget' %}
                                <div class="inline-fields project-budget">
                                    <label for="projectBudget">Budget</label>
                                    <div class="input-group">
                                        <input type="text" name="budget" id="projectBudget"
                                               class="form-control project-budget-input"
                                               value="{{ field.value|default:'0.0' }}">
                                    </div>
                                </div>
                            {% elif field.name == 'start_date' %}
                                <div class="inline-fields project-date">
                                    <label for="startDate">Start Date</label>
                                    <div class="input-group">
                                        <input type="date" name="start_date" id="startDate"
                                               class="form-control" value="{{ start_date|date:'Y-m-d' }}">
                                    </div>
                                </div>
                            {% elif field.name == 'end_date' %}
                                <div class="inline-fields project-date">
                                    <label for="endDate">End Date</label>
                                    <div class="input-group">
                                        <input type="date" name="end_date" id="endDate"
                                               class="form-control" value="{{ end_date|date:'Y-m-d' }}">
                                    </div>
                                </div>

                            {% else %}
                                <div>
                                    {{ field.label_tag }}
                                    {{ field }}
                                </div>
                            {% endif %}
                            <!-- Render field errors if any -->
                            {% for error in field.errors %}
                                <div class="text-danger">{{ error }}</div>
                            {% endfor %}
                        {% endfor %}

                        <div class="update-button-field">
                            <a href="{% url 'projects' %}" class="btn btn-cancel btn-outline-secondary">Cancel</a>
                            <input type="submit" value="Submit"
                                   class="btn btn-primary btn-primary-sm">
                        </div>
                    </div>
                </form>

            </div>
        </div>
    </div>


    <!-- Scripts -->
    <script src="{% static 'assets/js/budgetValue.js' %}"></script>

    {#    <script>#}
    {#        // Get the project type select element#}
    {#        const projectTypeSelect = document.getElementById('projectType');#}
    {##}
    {#        // Add event listener for change event#}
    {#        projectTypeSelect.addEventListener('change', function () {#}
    {#            // Get the selected option#}
    {#            const selectedOption = projectTypeSelect.options[projectTypeSelect.selectedIndex];#}
    {#            // Get the class of the selected option#}
    {#            const selectedClass = selectedOption.getAttribute('class');#}
    {##}
    {#            // Remove any existing background color class from all options#}
    {#            projectTypeSelect.querySelectorAll('option').forEach(option => {#}
    {#                option.classList.remove('selected');#}
    {#            });#}
    {##}
    {#            // Add the class of the selected option to the selected option#}
    {#            selectedOption.classList.add('selected');#}
    {#        });#}
    {#    </script>#}


{% endblock content %}